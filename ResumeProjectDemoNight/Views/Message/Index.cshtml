@model List<ResumeProjectDemoNight.Entities.Message>
@{
    ViewData["Title"] = "Mesajlar";
    Layout = "~/Views/AdminLayout/Index.cshtml";
}

<div class="bg-card-dark
            border-2 border-primary
            rounded-2xl
            p-6
            shadow-[0_0_0_2px_rgba(255,140,0,0.25),0_0_35px_rgba(255,140,0,0.35)]">

    <!-- HEADER -->
    <div class="flex items-center justify-between mb-6">
        <div>
            <h2 class="text-2xl font-bold text-white">Mesajlar</h2>
            <p class="text-slate-400 text-sm mt-1">
                Gelen mesajlarınızı buradan yönetebilirsiniz.
            </p>
        </div>

        <span class="bg-primary text-white px-4 py-1.5 rounded-full text-sm font-semibold
                     shadow-[0_0_12px_rgba(255,140,0,0.5)]">
            @Model.Count(m => !m.IsRead) Okunmadı
        </span>
    </div>

    <!-- TABLE -->
    <div class="overflow-x-auto">
        <table class="w-full text-sm">
            <thead>
                <tr class="border-b border-white/10 text-slate-400">
                    <th class="text-left py-3 px-3">#</th>
                    <th class="text-left py-3 px-3">Gönderen</th>
                    <th class="text-left py-3 px-3">Konu</th>
                    <th class="text-left py-3 px-3">Tarih</th>
                    <th class="text-left py-3 px-3">Durum</th>
                    <th class="text-center py-3 px-3">İşlem</th>
                </tr>
            </thead>
            <tbody>

                @foreach (var message in Model)
                {
                    <tr class="border-b border-white/5 transition
                                   hover:bg-white/5
                                   @(!message.IsRead ? "bg-primary/5" : "")">

                        <td class="py-4 px-3 text-slate-400">
                            @message.MessageId
                        </td>

                        <td class="py-4 px-3 font-medium
                                       @(message.IsRead ? "text-slate-300" : "text-white")">
                            @message.NameSurname
                        </td>

                        <td class="py-4 px-3
                                       @(message.IsRead
                                                                    ? "text-slate-400"
                                                                    : "text-slate-200 font-semibold")">
                            @message.Subject
                        </td>

                        <td class="py-4 px-3 text-slate-400">
                            @message.SendDate.ToString("dd.MM.yyyy HH:mm")
                        </td>

                        <td class="py-4 px-3">
                            @if (message.IsRead)
                            {
                                <span class="px-2 py-1 rounded-full text-xs
                                                     bg-slate-700 text-slate-300">
                                    Okundu
                                </span>
                            }
                            else
                            {
                                <span class="px-2 py-1 rounded-full text-xs
                                                     bg-primary text-white
                                                     shadow-[0_0_10px_rgba(255,140,0,0.5)]">
                                    Yeni
                                </span>
                            }
                        </td>

                        <td class="py-4 px-3">
                            <div class="flex items-center justify-center gap-3">

                                <a href="@Url.Action("Details", new { id = message.MessageId })"
                                   class="p-2 rounded-lg hover:bg-white/10 transition"
                                   title="Görüntüle">
                                    <svg class="w-5 h-5 text-primary" fill="none"
                                         stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"
                                              d="M15 12a3 3 0 11-6 0
                                                     3 3 0 016 0z" />
                                        <path stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"
                                              d="M2.458 12C3.732 7.943
                                                     7.523 5 12 5c4.478 0
                                                     8.268 2.943 9.542 7
                                                     -1.274 4.057-5.064 7
                                                     -9.542 7-4.477 0
                                                     -8.268-2.943-9.542-7z" />
                                    </svg>
                                </a>

                                <a href="@Url.Action("Delete", new { id = message.MessageId })"
                                   onclick="return confirm('Bu mesajı silmek istediğinize emin misiniz?')"
                                   class="p-2 rounded-lg hover:bg-red-500/10 transition"
                                   title="Sil">
                                    <svg class="w-5 h-5 text-red-400" fill="none"
                                         stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round"
                                              stroke-linejoin="round"
                                              stroke-width="2"
                                              d="M19 7l-.867 12.142
                                                     A2 2 0 0116.138 21
                                                     H7.862a2 2 0 01
                                                     -1.995-1.858L5 7
                                                     m5 4v6m4-6v6
                                                     m1-10V4a1 1 0
                                                     00-1-1h-4a1 1 0
                                                     00-1 1v3M4 7h16" />
                                    </svg>
                                </a>

                            </div>
                        </td>
                    </tr>
                }

            </tbody>
        </table>
    </div>

    <!-- FOOTER -->
    <div class="mt-5 text-center text-slate-500 text-sm">
        Toplam <b>@Model.Count</b> mesaj listeleniyor.
    </div>

</div>
