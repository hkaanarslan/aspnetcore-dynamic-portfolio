@model ResumeProjectDemoNight.Entities.About
@using ResumeProjectDemoNight.Context

@{
    Layout = "~/Views/AdminLayout/Index.cshtml";
    ViewData["Title"] = "Hakkımda Güncelle";

    ResumeContext context = new ResumeContext();
    var socialMedias = context.SocialMedias.ToList();
}

<div class="max-w-7xl mx-auto">

    <div class="mb-8">
        <h1 class="text-3xl font-bold text-white">
            Hakkımda & Sosyal Medya
        </h1>
        <p class="text-slate-400 text-base mt-2">
            Ana sayfada görünen bilgileri buradan yönetebilirsiniz.
        </p>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">

        <!-- SOL TARAF -->
        <div class="lg:col-span-2">
            <div class="admin-card p-8 border border-primary/40 rounded-3xl">

                <h2 class="text-xl font-bold text-white mb-6 border-b border-white/10 pb-4">
                    Genel Bilgiler
                </h2>

                <form method="post"
                      asp-action="Update"
                      asp-controller="About"
                      class="space-y-6">

                    @Html.AntiForgeryToken()

                    <!-- 🔴 SADECE EKLENEN KISIM (TASARIM BOZULMAZ) -->
                    @if (ViewBag.Error != null)
                    {
                        <div class="mb-4 p-4 rounded-xl bg-red-500/10 border border-red-500/30 text-red-400 text-sm">
                            @ViewBag.Error
                        </div>
                    }

                    <input type="hidden" asp-for="AboutId" />
                    <input type="hidden" asp-for="Title" />

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

                        <div>
                            <label class="block text-slate-300 text-sm font-semibold mb-2">
                                Ad Soyad
                            </label>
                            <input asp-for="NameSurname"
                                   class="w-full px-5 py-3.5 rounded-xl bg-background-dark border border-white/10 text-white focus:ring-2 focus:ring-primary outline-none transition" />
                        </div>

                        <div>
                            <label class="block text-slate-300 text-sm font-semibold mb-2">
                                Ana Profil Fotoğrafı (Yuvarlak)
                            </label>
                            <input asp-for="ImageUrl"
                                   placeholder="/images/avatar.jpg"
                                   class="w-full px-5 py-3.5 rounded-xl bg-background-dark border border-white/10 text-white focus:ring-2 focus:ring-primary outline-none transition" />
                        </div>

                        <div>
                            <label class="block text-slate-300 text-sm font-semibold mb-2">
                                Hakkımda Fotoğrafı (Dik Vesikalık)
                            </label>
                            <input asp-for="AboutImageUrl"
                                   placeholder="/images/about-profile.jpg"
                                   class="w-full px-5 py-3.5 rounded-xl bg-background-dark border border-white/10 text-white focus:ring-2 focus:ring-primary outline-none transition" />
                            <p class="text-xs text-slate-400 mt-2">
                                Hakkımda sayfasında görünen dik fotoğraf
                            </p>
                        </div>

                        <div>
                            <label class="block text-slate-300 text-sm font-semibold mb-2">
                                CV URL
                            </label>
                            <input asp-for="CvUrl"
                                   class="w-full px-5 py-3.5 rounded-xl bg-background-dark border border-white/10 text-white focus:ring-2 focus:ring-primary outline-none transition" />
                        </div>

                    </div>

                    <div>
                        <label class="block text-slate-300 text-sm font-semibold mb-2">
                            Değişen Yazılar
                        </label>
                        <input asp-for="Description"
                               class="w-full px-5 py-3.5 rounded-xl bg-background-dark border border-white/10 text-white focus:ring-2 focus:ring-primary outline-none transition" />
                        <p class="text-xs text-slate-400 mt-2">
                            Virgülle ayırabilirsiniz.
                        </p>
                    </div>

                    <div>
                        <label class="block text-slate-300 text-sm font-semibold mb-2">
                            Hakkımda Yazısı
                        </label>
                        <textarea asp-for="AboutText" rows="8"
                                  class="w-full px-5 py-4 rounded-xl bg-background-dark border border-white/10 text-white resize-none focus:ring-2 focus:ring-primary outline-none transition"></textarea>
                    </div>

                    <div class="pt-6 border-t border-white/10 text-right">
                        <button type="submit"
                                class="px-8 py-3 rounded-xl bg-primary text-white font-bold hover:scale-[1.02] transition shadow-lg shadow-primary/30">
                            Bilgileri Güncelle
                        </button>
                    </div>

                </form>

            </div>
        </div>

        <!-- SAĞ TARAF -->
        <div class="lg:col-span-1">
            <div class="admin-card p-8 h-full border border-primary/40 rounded-3xl">

                <h2 class="text-xl font-bold text-white mb-6 border-b border-white/10 pb-4">
                    Sosyal Medya Hesapları
                </h2>

                <div class="space-y-6">

                    @foreach (var item in socialMedias)
                    {
                        <form method="post"
                              action="/SocialMedia/Update"
                              class="bg-background-dark p-6 rounded-2xl border border-white/10 hover:border-primary/60 transition">

                            @Html.AntiForgeryToken()

                            <input type="hidden" name="SocialMediaId" value="@item.SocialMediaId" />
                            <input type="hidden" name="Icon" value="@item.Icon" />

                            <div class="flex justify-center mb-5 text-4xl text-primary">
                                <i class="@item.Icon"></i>
                            </div>

                            <input type="text"
                                   name="Url"
                                   value="@item.Url"
                                   placeholder="https://..."
                                   class="w-full bg-black/30 border border-white/10 rounded-lg px-4 py-3 text-sm text-white focus:ring-1 focus:ring-primary outline-none" />

                            <button type="submit"
                                    class="mt-4 w-full py-2.5 rounded-lg bg-primary text-white font-semibold hover:opacity-90 transition">
                                Güncelle
                            </button>

                        </form>
                    }

                </div>

            </div>
        </div>

    </div>

</div>
